# Contributor: Attila Szöllõsi <ata2001@airmail.cc>
pkgname=firmware-sony-rhine
pkgver=2
pkgrel=1
_commit="bf15795df1d1dcd61d37f6215c1eda47e669d54e"
pkgdesc="Firmware files for Sony Rhine platform"
url="https://github.com/TheMuppets/proprietary_vendor_sony"
arch="armv7"
license="proprietary"
depends="wcnss-wlan"
source="$pkgname-$_commit.tar.gz::https://github.com/TheMuppets/proprietary_vendor_sony/archive/$_commit.tar.gz"
options="!strip !check !archcheck !spdx"
builddir="$srcdir/proprietary_vendor_sony-$_commit"

_files="wcnss.b00 wcnss.b01 wcnss.b02 wcnss.b04 wcnss.b06 wcnss.b07
	wcnss.b08 wcnss.b09 wcnss.mdt"
_files_prima="WCNSS_cfg.dat WCNSS_qcom_cfg.ini WCNSS_qcom_wlan_nv.bin"

package() {
	# /lib/firmware/postmarketos
	for _i in $_files; do
		install -D -m644 rhine-common/proprietary/etc/firmware/"$_i" \
			"$pkgdir"/lib/firmware/postmarketos/"$_i"
	done

	# /lib/firmware/postmarketos/wlan/prima
	for _i in $_files_prima; do
		install -D -m644 rhine-common/proprietary/etc/firmware/wlan/prima/"$_i" \
			"$pkgdir"/lib/firmware/postmarketos/wlan/prima/"$_i"
	done
}

sha512sums="0cae1fa4954b34bd43df1742b1dd30aca11d9c2a93fbbfa2f226f3f6ad23bb9aad38cf5c8b6609fe407fa05e3730d1e737256b3834666deb0ee661f1a9d6ecb8  firmware-sony-rhine-bf15795df1d1dcd61d37f6215c1eda47e669d54e.tar.gz"
